@using UIComponents.Abstractions;
@using UIComponents.Abstractions.Extensions;
@using UIComponents.Abstractions.Models
@using UIComponents.Generators.Interfaces;
@using UIComponents.Models.Models.Buttons
@using UIComponents.Models.Models.Card;
@using UIComponents.Models.Models;
@using UIComponents.Models.Extensions;
@using UIComponents.Models.Models.Dropdown
@using UIComponents.Models.Models.Graphs.TimeLineGraph
@using UIComponents.Models.Models.Icons
@using UIComponents.Models.Models.Inputs
@using UIComponents.Models.Models.Texts
@using UIComponents.Web.Extensions;
@{
    ViewData["Title"] = "Home Page";
}

@inject IUIComponentService UIC
@{
    var testModel = new TestModel();
    var tabs = new UICTabs("TestTabs")
    {
        OnlyRenderSingleContent = true
    }
        .Add(out var formTabs, new UICTabs("FormTabs")
        {
            Header = new UICCardHeader("Forms"),
            Renderer = UICCardWithTabsRenderer.VerticalTab
        }
        .Add(new UICCard(new Translatable("Card.Create"))
            .Add(await UIC.CreateComponentAsync(new TestModel(){Enum= TestEnum.Two}, new()
            {
                ReplaceSaveButtonWithCreateButton = true,
                ShowEditButton = false,
                IncludedProperties = "teststring, number, decimal, checkbox, enum"
            })).Add(await UIC.CreateComponentAsync(testModel, x=>x.TestString)))
        .Add(new UICCard(new Translatable("Card.Edit"))
            .Add(new UICSidePanel(await UIC.CreateComponentAsync(new TestModel()), new UICGroup()
                    .AddAttribute("width", "300px")
                    .AddAttribute("height", "100%"))))

        .Add(new UICCard(new Translatable("Card.Partial"))
            .AddPartial("Home", "test")
            ))
    .Add(new UICCard(new Translatable("Card.Partial"))
            .AddPartial("Home", "test"));

    formTabs.Add(new UICCard("Card.SelectList").AddPartial("home", "selectlist"));
    tabs.FindInputGroupByPropertyName(nameof(TestModel.Enum), (input)=>{
        input.AppendInput.Add(new UICButton() { PrependButtonIcon = UICIcon.Add() });
    });



    tabs.Add(new UICCard(new UICCardHeader("Chart")).Add(new UICTimeLineGraph(), graph =>
    {
        graph.Height = "1000px";
        graph.Add(new("Graph1", "blub", "/home/GetTimelineChartData") { CacheData = true, RemoveCacheOnZoom = true, AdditionalPostData = new { UserId = 1 } });
        graph.Add(new("Graph2", "foo", "/home/GetTimelineChartData"){CacheData = true, RemoveCacheOnZoom = true});
    }));

}

@await tabs.InvokeAsync(Component)