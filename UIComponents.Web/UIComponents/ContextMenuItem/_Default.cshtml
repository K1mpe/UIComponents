@using CDCPortal.DA.UIComponents.Models;
@using CDCPortal.DA.UIComponents.Varia;

@model UICContextMenuItem
@{
    Model.AssignCollectionForChildren();
    string guid = CommonHelper.CreateGuid();
    Model.AddScript(
    @<text>
        contextMenu.add({
        selector: '@Html.Raw(Model.Selector())',

        @if (!string.IsNullOrEmpty(Model.Id))
                {
        <text>
            id: '@Html.Raw(Model.Id)',
        </text>
                }

        @if(!string.IsNullOrWhiteSpace(Model.Category))
        {
        <text>
        category: '@Html.Raw(Model.Category)',
        </text>
        }

        @if (Model.DropdownItem.HasValue())
                {
        <text>
            element: $('#@guid').html(),
        </text>
                }

        @if (Model.Position != null)
                {
        <text>
            position: @JsonSerializer.Serialize(Model.Position.Value),
        </text>
                }

        @if (Model.OnClick.HasValue())
                {
        <text>
            onClick: async function(target, clickedElement, event){
            @await Model.OnClick.InvokeAsync(Component)
            },
        </text>
                }

        @if (Model.Text.HasValue())
                {
        <text>
            text: @await Model.Text.InvokeAsync(Component),
        </text>
                }

        @if (Model.Title.HasValue())
                {
        <text>
            title: @await Model.Title.InvokeAsync(Component),
        </text>
                }

        @if (Model.Attributes.HasValue())
                {
        <text>
            attr: @await Model.Attributes.InvokeAsync(Component),
        </text>
                }
        });
    </text>);

}


<script type="text/html" id="@guid">
    @await Model.DropdownItem.InvokeAsync(Component)
</script>

@await Model.RenderStylesAndScripts(Component)
